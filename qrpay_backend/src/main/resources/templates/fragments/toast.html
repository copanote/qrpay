<div th:fragment="toast-container">
  <div
    id="toast-container"
    style="position: fixed; bottom: 50px; left: 50%; transform: translateX(-50%); z-index: 10000; display: flex; flex-direction: column-reverse; gap: 10px; align-items: center"
  ></div>

  <style>
    .toast-item {
      display: flex;
      align-items: center;
      /* 고정 너비를 제거하고 콘텐츠에 맞춤 */
      width: max-content;
      max-width: 90vw; /* 화면 밖으로 나가지 않게 제한 */
      padding: 10px 18px;
      border-radius: 50px;

      background: rgba(255, 255, 255, 0.5);
      /*backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);*/

      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.4);

      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .toast-item.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* 아이콘 색상 설정 */
    .toast-success .toast-icon {
      stroke: #16a34a;
    }
    .toast-error .toast-icon {
      stroke: #dc2626;
    }
    .toast-info .toast-icon {
      stroke: #2563eb;
    }

    .toast-icon {
      flex-shrink: 0;
      width: 18px;
      height: 18px;
      margin-right: 8px;
      fill: none;
      stroke-width: 2.5;
    }

    .toast-content {
      color: #1a1a1a;
      font-size: 14px;
      font-weight: 500;
      letter-spacing: -0.3px;
      /* 텍스트가 한 줄로 나오게 설정 (아주 길면 자동 줄바꿈) */
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  </style>
  <script>
    const toast = {
      icons: {
        success: `<svg class="toast-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
        error: `<svg class="toast-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
        info: `<svg class="toast-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
      },

      show: function (message, type = 'success') {
        const container = document.getElementById('toast-container');
        if (!container) return;

        const toastElement = document.createElement('div');
        toastElement.className = `toast-item toast-${type}`;
        toastElement.innerHTML = `
            ${this.icons[type]}
            <div class="toast-content">${message}</div>
        `;

        container.appendChild(toastElement);

        // 부드럽게 나타나기
        setTimeout(() => toastElement.classList.add('show'), 50);

        // 3초 후 제거
        setTimeout(() => {
          toastElement.classList.remove('show');
          setTimeout(() => toastElement.remove(), 300);
        }, 3000);
      },

      success: function (m) {
        this.show(m, 'success');
      },
      error: function (m) {
        this.show(m, 'error');
      },
      info: function (m) {
        this.show(m, 'info');
      },
    };
  </script>
</div>
